extends ./layout/layout

block title
  title Step 1 results

block content
  h3 First step results
  .scrollable-table
    table.mui-table.mui-table--bordered.first-step
      thead
        tr
          th Participant
          - var colNumber = 0
          each task in allTasks
            th(colspan=2)
              div= task.name
              div
                div(data-col= 2 * colNumber + 1) Time
                  button.js-sort Sort
                div Result file
            - colNumber++
          th(data-col= 2 * colNumber + 1) Total
            button.js-sort Sort
      tbody
        each user in users
          tr(data-id=user.id)
            td #{user.firstName} #{user.lastName}
            - var totalTime = 0
            each task in allTasks
              if user.tasks[task.id]
                - totalTime += user.tasks[task.id].time
                td
                  span.sort-item= user.tasks[task.id].time
                td
                  a.load-file(href="/saveFile/#{user.id}/#{task.id}") Download
                  a.show(href="/showMarkup/#{user.id}/#{task.id}/") Show
              else
                td
                td
            td
              span.sort-item= totalTime

